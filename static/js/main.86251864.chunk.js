(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(11),c=n.n(a),s=n(3),i=n(4),u=n(5),o=n(2),l=Object(r.createContext)(),j=n(7),d=n.n(j),b=n(9),m=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,a,c,i,u=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:[],e.next=3,fetch(t);case 3:return r=e.sent,e.next=6,r.json();case 6:return a=e.sent,e.next=9,a.results.map((function(e){return delete e.residents,e}));case 9:if(c=e.sent,i=[],!a.next){e.next=17;break}return e.next=14,m(a.next,c);case 14:i=e.sent,e.next=18;break;case 17:i=[].concat(Object(s.a)(c),Object(s.a)(i));case 18:return e.abrupt("return",[].concat(Object(s.a)(i),Object(s.a)(n)));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://swapi-trybe.herokuapp.com/api/planets/",e.next=3,m("https://swapi-trybe.herokuapp.com/api/planets/");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=f,h=n(0);var x=function(e){var t=e.children,n=Object(r.useState)([]),a=Object(o.a)(n,2),c=a[0],j=a[1],d=Object(r.useState)(!0),b=Object(o.a)(d,2),m=b[0],f=b[1],x=Object(r.useState)(""),p=Object(o.a)(x,2),v=p[0],g=p[1],N=Object(r.useState)([]),C=Object(o.a)(N,2),y=C[0],k=C[1],_=Object(r.useState)({column:"name",sort:"ASC"}),S=Object(o.a)(_,2),w=S[0],A=S[1],F=Object(r.useState)(!0),B=Object(o.a)(F,2),E=B[0],q=B[1],V=function(e){var t=e.target,n=t.value,r=t.dataset.setsort;A(Object(u.a)(Object(u.a)({},w),{},Object(i.a)({},r,n)))},L=function(e){k([].concat(Object(s.a)(y),[e]))},D=function(e){var t=e.target.dataset.column,n=y.filter((function(e){return e.column!==t}));k(n)};return Object(r.useEffect)((function(){O().then((function(e){j(e),f(!1)}))}),[]),Object(h.jsx)(l.Provider,{value:{data:c,isLoading:m,filters:{filterByName:{name:v},filterByNumericValues:y,order:w},setName:g,addFilterByNumeric:L,deleteFilter:D,order:w,changeOrderColumn:V,orderApproved:E,setOrderApproved:q},children:t})};var p=function(e){var t=e.nameColumn;return Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:t.map((function(e,t){return Object(h.jsx)("th",{className:"m-1 bg-dark",children:e},t)}))})})};var v=function(e){var t=e.contentRow;return Object(h.jsx)("tbody",{children:t.map((function(e,t){return Object(h.jsx)("tr",{children:(n=e,Object.entries(n).map((function(e,t){var n=Object(o.a)(e,2),r=n[0],a=n[1];return"films"===r||"url"===r?Object(h.jsx)("td",{className:"m-1 bg-dark",children:Object(h.jsx)("a",{target:"_blank",rel:"noreferrer",href:a,children:"Link"})},t):"name"===r?Object(h.jsx)("td",{className:"m-1 bg-dark","data-testid":"planet-name",children:a},t):Object(h.jsx)("td",{className:"m-1 bg-dark",children:a},t)})))},t);var n}))})};function g(e,t){var n=Object(s.a)(e);return 0===t.length?e:(t.forEach((function(e){var t=n.filter((function(t){return function(e,t){var n=e.column,r=e.comparison,a=e.value;return"unknown"===t[n]?"":"maior que"===r&&Number(t[n])>Number(a)||"menor que"===r&&Number(t[n])<Number(a)||"igual a"===r&&Number(t[n])===Number(a)?t:""}(e,t)}));n=Object(s.a)(t)})),n)}function N(e,t){var n=t.column;return"ASC"===t.sort?e.some((function(e){return!Number.isNaN(Number(e[n]))}))?e.sort((function(e,t){return e[n]-t[n]})):e.sort((function(e,t){return e[n].localeCompare(t[n])})):e.some((function(e){return!Number.isNaN(Number(e[n]))}))?e.sort((function(e,t){return t[n]-e[n]})):e.sort((function(e,t){return t[n].localeCompare(e[n])}))}var C=function(){var e=Object(r.useContext)(l),t=e.data,n=e.filters,a=n.filterByName.name,c=n.filterByNumericValues,s=n.order,i=e.orderApproved,u=e.setOrderApproved,j=Object(r.useState)([]),d=Object(o.a)(j,2),b=d[0],m=d[1];return Object(r.useEffect)((function(){if(i&&t.length>1){var e=N(t,s);m(e),u(!1)}else m(t)}),[t,s,i,u]),Object(r.useEffect)((function(){var e=function(e,t){return t?e.filter((function(e){return e.name.includes(t)?e:""})):e}(t,a),n=g(e,c);if(i&&n.length>1){var r=N(n,s);m(r),u(!1)}else m(n)}),[t,c,a,s,i,u]),[b]};var y=function(){var e=Object(r.useContext)(l),t=e.isLoading,n=e.data,a=C(),c=Object(o.a)(a,1)[0];return t?Object(h.jsx)("h1",{children:"Loading"}):Object(h.jsx)("main",{className:"container bg-image-galaxy text-color__light",children:Object(h.jsxs)("table",{children:[Object(h.jsx)(p,{nameColumn:Object.keys(n[0])}),Object(h.jsx)(v,{contentRow:c})]})})};var k=function(){var e=Object(r.useContext)(l),t=e.setName,n=e.filters.filterByName.name;return Object(h.jsx)("input",{"data-testid":"name-filter",value:n,type:"text",onChange:function(e){var n=e.target.value;t(n)},className:"input-text "})};var _=function(e){var t=e.column,n=e.handleChange,r=e.columnFilter;return Object(h.jsx)("div",{className:"m-1",children:Object(h.jsx)("select",{name:"column",value:t,onChange:n,"data-testid":"column-filter",required:!0,children:0===r.length?Object(h.jsx)("option",{value:"",children:" "}):r.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},t)}))})})};var S=function(e){var t=e.comparison,n=e.handleChange,r=e.arrComparison;return Object(h.jsx)("div",{className:"m-1",children:Object(h.jsx)("select",{value:t,onChange:n,name:"comparison","data-testid":"comparison-filter",required:!0,children:r.map((function(e,t){return Object(h.jsx)("option",{children:e},t)}))})})};var w=function(e){var t=e.numberValue,n=e.handleChange;return Object(h.jsx)("div",{className:"m-1",children:Object(h.jsx)("input",{name:"value",onChange:n,type:"number",value:t,"data-testid":"value-filter",required:!0})})};var A=function(e){var t=e.onClickAddFilterNumeric;return Object(h.jsx)("div",{className:"m-1",children:Object(h.jsx)("button",{type:"submit",onClick:t,"data-testid":"button-filter",children:"Filtrar"})})},F=["population","orbital_period","diameter","rotation_period","surface_water"],B=["maior que","menor que","igual a"];var E=function(){var e=Object(r.useContext)(l),t=e.addFilterByNumeric,n=e.filters.filterByNumericValues,a=Object(r.useState)({column:F[0],comparison:B[0],value:"0"}),c=Object(o.a)(a,2),s=c[0],j=c[1],d=Object(r.useState)(!1),b=Object(o.a)(d,2),m=b[0],f=b[1],O=Object(r.useState)(F),x=Object(o.a)(O,2),p=x[0],v=x[1],g=function(e){var t=e.target,n=t.name,r=t.value;j(Object(u.a)(Object(u.a)({},s),{},Object(i.a)({},n,r)))},N=Object(r.useCallback)((function(){if(0===n.length)return F;var e=F.filter((function(e){return n.every((function(t){return t.column!==e}))?e:""}));return e.length?e:["---"]}),[n]);return Object(r.useEffect)((function(){v(N())}),[N]),Object(r.useEffect)((function(){j({column:p[0],comparison:B[0],value:"0"})}),[n,p]),Object(h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"d-flex align-items__center m-1",children:[Object(h.jsx)(_,{column:s.column,handleChange:g,columnFilter:p}),Object(h.jsx)(S,{comparison:s.comparison,handleChange:g,arrComparison:B}),Object(h.jsx)(w,{numberValue:s.value,handleChange:g}),Object(h.jsx)(A,{onClickAddFilterNumeric:function(){s.column&&s.comparison?(t(s),f(!1)):f(!0)}}),m&&Object(h.jsx)("span",{children:"Selecione todas as op\xe7\xf5es"})]})};var q=function(){var e=Object(r.useContext)(l),t=e.filters.filterByNumericValues,n=e.deleteFilter;return Object(h.jsx)("div",{className:"m-1 d-flex justify-content__center align-items__center",children:t.map((function(e,t){return Object(h.jsxs)("div",{"data-testid":"filter",className:"d-flex",children:[Object(h.jsx)("span",{children:e.column}),Object(h.jsx)("button",{onClick:n,"data-column":e.column,type:"button",children:"X"})]},t)}))})},V=["name","population","orbital_period","diameter","rotation_period","surface_water","climate","gravity","terrain"];var L=function(){var e=Object(r.useContext)(l),t=e.order,n=e.changeOrderColumn,a=e.setOrderApproved;return Object(h.jsxs)("div",{className:"d-flex align-items__center m-1",children:[Object(h.jsx)("div",{children:Object(h.jsx)("select",{value:t.column,onChange:n,"data-testid":"column-sort","data-setsort":"column",children:V.map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},t)}))})}),Object(h.jsxs)("div",{className:"d-flex align-items__center m-2",children:[Object(h.jsxs)("label",{htmlFor:"asc",className:"m-2 d-flex",children:["ASC",Object(h.jsx)("input",{onChange:n,"data-setsort":"sort",id:"asc",name:"asc-desc","data-testid":"column-sort-input-asc",type:"radio",value:"ASC",defaultChecked:!0})]}),Object(h.jsxs)("label",{htmlFor:"desc",className:"m-2 d-flex",children:["DESC",Object(h.jsx)("input",{onChange:n,"data-setsort":"sort",id:"desc",name:"asc-desc","data-testid":"column-sort-input-desc",type:"radio",value:"DESC"})]})]}),Object(h.jsx)("div",{className:"m-1",children:Object(h.jsx)("button",{"data-testid":"column-sort-button",onClick:function(){return a(!0)},type:"button",children:"Ordenar"})})]})};var D=function(){return Object(h.jsxs)("div",{className:"d-flex m-1 justify-content__center",children:[Object(h.jsx)(k,{}),Object(h.jsx)(E,{}),Object(h.jsx)(q,{}),Object(h.jsx)(L,{})]})};var J=function(){return Object(h.jsxs)("header",{className:"container bg-galaxy  bg-gradient__galaxy",children:[Object(h.jsx)("h1",{className:"text-center m-1 font-poller",children:"Star Wars Planets Search"}),Object(h.jsx)(D,{})]})};var P=function(){return Object(h.jsxs)(x,{children:[Object(h.jsx)(J,{}),Object(h.jsx)(y,{})]})};n(18),n(19);c.a.render(Object(h.jsx)(P,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.86251864.chunk.js.map